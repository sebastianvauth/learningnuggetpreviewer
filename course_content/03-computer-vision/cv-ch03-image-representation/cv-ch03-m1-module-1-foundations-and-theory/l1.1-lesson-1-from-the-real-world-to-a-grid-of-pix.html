<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>From the Real World to a Grid of Pixels</title>
<style>
* {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #ffffff;
            min-height: 100vh;
            color: #2d3748;
            line-height: 1.6;
        }

        /* Progress Bar */
        .progress-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: rgba(0, 0, 0, 0.1);
            z-index: 1000;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #4facfe 0%, #00f2fe 100%);
            width: 0%;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(79, 172, 254, 0.5);
        }



        /* Main Container */
        .lesson-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        /* Section Cards */
        section {
            background: transparent;
            margin-bottom: 30px;
            padding: 20px 0;
            display: none;
            opacity: 0;
            transition: all 0.6s ease;
            transform: translateY(20px);
        }

        section.visible {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        /* Typography */
        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 1.5rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1.2;
        }

        h2 {
            font-size: 2rem;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 1.5rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        h3 {
            font-size: 1.25rem;
            font-weight: 600;
            color: #4a5568;
            margin-bottom: 1rem;
        }

        p {
            font-size: 1.125rem;
            line-height: 1.7;
            color: #4a5568;
            margin-bottom: 1.5rem;
        }

        ul {
            margin-left: 1.5rem;
            margin-bottom: 1.5rem;
        }

        li {
            font-size: 1.125rem;
            line-height: 1.7;
            color: #4a5568;
            margin-bottom: 0.5rem;
        }

        strong {
            color: #2d3748;
            font-weight: 600;
        }

        em {
            color: #667eea;
            font-style: normal;
            font-weight: 500;
        }

        /* Image Placeholders */
        .image-placeholder {
            margin: 2rem 0;
        }

        /* Confetti Animation */
        .confetti-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
            overflow: hidden;
        }

        .confetti {
            position: absolute;
            font-size: 20px;
            animation: confetti-fall 3s linear infinite;
        }

        @keyframes confetti-fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        .confetti:nth-child(odd) {
            animation-duration: 2.5s;
            animation-delay: 0.2s;
        }

        .confetti:nth-child(even) {
            animation-duration: 3.5s;
            animation-delay: 0.5s;
        }

        .confetti:nth-child(3n) {
            animation-duration: 2.8s;
            animation-delay: 0.8s;
        }

        .confetti:nth-child(4n) {
            animation-duration: 3.2s;
            animation-delay: 0.3s;
        }

        .confetti:nth-child(5n) {
            animation-duration: 2.7s;
            animation-delay: 0.7s;
        }

        /* Success Message Animation */
        .success-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            padding: 20px 30px;
            border-radius: 12px;
            font-size: 1.2em;
            font-weight: 600;
            box-shadow: 0 10px 25px rgba(40, 167, 69, 0.3);
            z-index: 10000;
            opacity: 0;
            animation: success-popup 2.5s ease-out;
            pointer-events: none;
        }

        @keyframes success-popup {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.5);
            }
            20% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1.1);
            }
            40% {
                transform: translate(-50%, -50%) scale(1);
            }
            80% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
            100% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.9);
            }
        }

        .image-placeholder img {
            width: 100%;
            height: auto;
            display: block;
            margin: 0 auto;
        }
        
        /* Specific sizing for individual images by section */
        #section1 .image-placeholder img {
            width: 70% !important;              /* Image 1: 70% (dramatic light beam) */
            max-width: 500px !important;
        }

        #section6 .image-placeholder img {
            width: 55% !important;              /* Image 2: 50-60% (meme image) */
            max-width: 400px !important;
        }
        
        #section9 .image-placeholder img {
            width: 85% !important;              /* Image 3: 80-90% (prism diagram) */
            max-width: 600px !important;
        }
        
        #section13 .image-placeholder img {
            width: 85% !important;              /* Image 4: 80-90% (red object) */
            max-width: 600px !important;
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            #section1 .image-placeholder img {
                width: 80% !important;
                max-width: 400px !important;
            }

            #section6 .image-placeholder img {
                width: 65% !important;
                max-width: 350px !important;
            }
            
            #section9 .image-placeholder img,
            #section13 .image-placeholder img {
                width: 90% !important;
                max-width: 450px !important;
            }
        }
        
        @media (max-width: 480px) {
            #section1 .image-placeholder img {
                width: 85% !important;
                max-width: 300px !important;
            }

            #section6 .image-placeholder img {
                width: 75% !important;
                max-width: 280px !important;
            }
            
            #section9 .image-placeholder img,
            #section13 .image-placeholder img {
                width: 95% !important;
                max-width: 320px !important;
            }
        }

        /* Content Boxes */
        .vocab-section, .why-it-matters, .test-your-knowledge, .faq-section, 
        .stop-and-think, .check-your-knowledge {
            margin: 2rem 0;
            padding: 2rem;
            border-radius: 8px;
            border-left: 4px solid;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .vocab-section::before, .why-it-matters::before, .test-your-knowledge::before,
        .faq-section::before, .stop-and-think::before, .check-your-knowledge::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            opacity: 0.05;
            z-index: 0;
        }

        .vocab-section {
            background: linear-gradient(135deg, #e6f3ff 0%, #f0f8ff 100%);
            border-left-color: #4facfe;
            box-shadow: 0 10px 30px rgba(79, 172, 254, 0.1);
        }

        .vocab-section::before {
            background: linear-gradient(45deg, #4facfe, #00f2fe);
        }

        .why-it-matters {
            background: linear-gradient(135deg, #ffeef7 0%, #fff0f8 100%);
            border-left-color: #f093fb;
            box-shadow: 0 10px 30px rgba(240, 147, 251, 0.1);
        }

        .why-it-matters::before {
            background: linear-gradient(45deg, #f093fb, #f5576c);
        }

        .test-your-knowledge, .check-your-knowledge {
            background: linear-gradient(135deg, #eafaf1 0%, #f0fcf4 100%);
            border-left-color: #68d391;
            box-shadow: 0 10px 30px rgba(104, 211, 145, 0.1);
        }

        .test-your-knowledge::before, .check-your-knowledge::before {
            background: linear-gradient(45deg, #68d391, #4fd1c7);
        }

        .faq-section {
            background: linear-gradient(135deg, #fffbeb 0%, #fefcf3 100%);
            border-left-color: #fbbf24;
            box-shadow: 0 10px 30px rgba(251, 191, 36, 0.1);
        }

        .faq-section::before {
            background: linear-gradient(45deg, #fbbf24, #f59e0b);
        }

        .stop-and-think {
            background: linear-gradient(135deg, #f3e8ff 0%, #f8f4ff 100%);
            border-left-color: #a78bfa;
            box-shadow: 0 10px 30px rgba(167, 139, 250, 0.1);
        }

        .stop-and-think::before {
            background: linear-gradient(45deg, #a78bfa, #8b5cf6);
        }

        .vocab-section:hover, .why-it-matters:hover, .test-your-knowledge:hover,
        .faq-section:hover, .stop-and-think:hover, .check-your-knowledge:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
        }

        .vocab-section h3 {
            color: #0ea5e9;
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-weight: 700;
            margin-bottom: 1rem;
            position: relative;
            z-index: 1;
        }

        .why-it-matters h3 {
            color: #ec4899;
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-weight: 700;
            margin-bottom: 1rem;
            position: relative;
            z-index: 1;
        }

        .test-your-knowledge h3, .check-your-knowledge h3 {
            color: #10b981;
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-weight: 700;
            margin-bottom: 1rem;
            position: relative;
            z-index: 1;
        }

        .faq-section h3 {
            color: #d97706;
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-weight: 700;
            margin-bottom: 1rem;
            position: relative;
            z-index: 1;
        }

        .stop-and-think h3 {
            color: #8b5cf6;
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-weight: 700;
            margin-bottom: 1rem;
            position: relative;
            z-index: 1;
        }

        .vocab-section h4, .test-your-knowledge h4, .check-your-knowledge h4, .faq-section h4 {
            color: #2d3748;
            font-size: 1.25rem;
            font-weight: 600;
            margin: 1.5rem 0 1rem 0;
            position: relative;
            z-index: 1;
        }

        .vocab-term {
            color: #0ea5e9;
            font-weight: 600;
        }

        /* Buttons */
        .continue-button, .reveal-button, .check-button {
            display: inline-block;
            padding: 16px 32px;
            margin-top: 2rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 50px;
            text-decoration: none;
            cursor: pointer;
            border: none;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
            position: relative;
            overflow: hidden;
        }

        .continue-button::before, .reveal-button::before, .check-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .continue-button:hover, .reveal-button:hover, .check-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.4);
        }

        .continue-button:hover::before, .reveal-button:hover::before, .check-button:hover::before {
            left: 100%;
        }

        .continue-button:active, .reveal-button:active, .check-button:active {
            transform: translateY(-1px);
        }

        /* Hidden state for conditional buttons */
        .continue-button[style*="display: none"] {
            display: none !important;
        }

        /* Ensure all conditional continue buttons match normal button styling exactly when shown */
        #continue-after-interactive:not([style*="display: none"]),
        #continue-after-check-knowledge:not([style*="display: none"]),
        #continue-after-test-knowledge:not([style*="display: none"]) {
            display: inline-block !important;
            width: auto !important;
            max-width: none !important;
            min-width: auto !important;
            padding: 16px 32px !important;
            margin: 30px auto !important;
            box-sizing: border-box !important;
        }

        /* Center ALL continue buttons by making all sections center them */
        section {
            text-align: center;
        }

        /* Reset text alignment for all content except continue buttons */
        section > *:not(.continue-button) {
            text-align: left;
        }

        /* Ensure content boxes also have left alignment */
        .check-your-knowledge,
        .test-your-knowledge,
        .vocab-section,
        .why-it-matters,
        .faq-section,
        .stop-and-think {
            text-align: left;
        }

        /* Smooth appearance for conditional continue buttons */
        .continue-button.show-with-animation {
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.6s ease-out forwards;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Multiple Choice */
        .multiple-choice {
            margin: 1.5rem 0;
        }

        .choice-option {
            display: block;
            margin: 1rem 0;
            padding: 1.5rem;
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            font-weight: 500;
            position: relative;
            overflow: hidden;
        }

        .choice-option::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 0;
        }

        .choice-option:hover {
            transform: translateX(5px);
            border-color: rgba(102, 126, 234, 0.3);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.15);
        }

        .choice-option:hover::before {
            opacity: 0.05;
        }

        .choice-option.selected, .choice-option.correct {
            background: linear-gradient(135deg, #eafaf1 0%, #f0fcf4 100%);
            border-color: #68d391;
            color: #2d3748;
        }

        .choice-option.incorrect {
            background: linear-gradient(135deg, #fef2f2 0%, #fef7f7 100%);
            border-color: #f87171;
            color: #2d3748;
        }

        .choice-explanation {
            display: none;
            margin-top: 1rem;
            padding: 1rem;
            background: #f1f5f9;
            border-radius: 8px;
            font-size: 0.9rem;
            line-height: 1.6;
            animation: fadeIn 0.5s ease;
            position: relative;
            z-index: 1;
        }

        /* Spectrum Explorer - keeping the interactive styles but updating colors */
        .spectrum-explorer {
            position: relative;
            width: 100%;
            max-width: 100%;
            margin: 2rem 0;
            background: #ffffff;
            border: 1px solid #e2e8f0;
            padding: 40px;
        }

        .stage {
            min-height: 400px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .stage-text h3 {
            font-size: 1.75rem;
            font-weight: 600;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin: 0 0 16px 0;
        }

        .instruction {
            font-size: 1.1rem;
            color: #6b7280;
            margin: 0;
            padding: 16px 24px;
            background: rgba(102, 126, 234, 0.1);
            border-radius: 12px;
            border: 2px dashed rgba(102, 126, 234, 0.3);
        }

        .continue-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 16px 32px;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }

        .continue-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.4);
        }

        .revelation-text h3 {
            font-size: 2rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin: 0 0 16px 0;
        }

        .spectrum-point {
            border-radius: 16px;
            transition: all 0.3s ease;
            border: 2px solid #e2e8f0;
            background: #ffffff;
        }

        .spectrum-point:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.2);
            border-color: rgba(102, 126, 234, 0.3);
        }

        .spectrum-point.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.4);
        }

        .info-panel {
            background: #ffffff;
            border-radius: 16px;
            border: 1px solid #e2e8f0;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            padding: 24px;
        }

        .region-title {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hook {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .lesson-container {
                padding: 20px 15px;
            }

            section {
                padding: 15px 0;
                margin-bottom: 20px;
            }

            h1 {
                font-size: 2rem;
            }

            h2 {
                font-size: 1.75rem;
            }

            p, li {
                font-size: 1rem;
            }



            .continue-button, .reveal-button, .check-button {
                width: 100%;
            text-align: center;
                margin-top: 1.5rem;
            }

            .spectrum-explorer {
                padding: 20px;
            }

            .choice-option {
                padding: 1rem;
            }

            .mark-completed-button {
                padding: 14px 28px;
                font-size: 0.9rem;
                margin: 30px auto 15px auto;
            }
        }

        @media (max-width: 480px) {
            .lesson-container {
                padding: 15px 10px;
            }

            section {
                padding: 10px 0;
            }

            h1 {
                font-size: 1.75rem;
            }

            .vocab-section, .why-it-matters, .test-your-knowledge, 
            .faq-section, .stop-and-think, .check-your-knowledge {
                padding: 1.5rem;
            }

            .mark-completed-button {
                padding: 12px 24px;
                font-size: 0.85rem;
                margin: 25px auto 10px auto;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-in {
            animation: fadeIn 0.5s ease-out;
        }

        /* Accessibility */
        .choice-option:focus {
            outline: 2px solid #667eea;
            outline-offset: 2px;
        }

        .continue-button:focus, .reveal-button:focus, .check-button:focus {
            outline: 2px solid white;
            outline-offset: 2px;
        }

        /* Content positioning */
        .vocab-section *, .why-it-matters *, .test-your-knowledge *, 
        .faq-section *, .stop-and-think *, .check-your-knowledge * {
            position: relative;
            z-index: 1;
        }

        /* Mark as Completed Button */
        .mark-completed-button {
            display: none;
            width: 100%;
            max-width: 400px;
            margin: 40px auto 20px auto;
            padding: 16px 32px;
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(72, 187, 120, 0.3);
            text-align: center;
            text-decoration: none;
        }

        .mark-completed-button.show {
            display: block;
        }

        .mark-completed-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(72, 187, 120, 0.4);
            background: linear-gradient(135deg, #38a169 0%, #2f855a 100%);
        }

        .mark-completed-button:active {
            transform: translateY(0);
        }

        .mark-completed-button.completed {
            background: linear-gradient(135deg, #94a3b8 0%, #64748b 100%);
            box-shadow: 0 4px 20px rgba(148, 163, 184, 0.3);
            cursor: default;
        }

        .mark-completed-button.completed:hover {
            background: linear-gradient(135deg, #94a3b8 0%, #64748b 100%);
            box-shadow: 0 4px 20px rgba(148, 163, 184, 0.3);
            transform: none;
        }

        /* Success Message */
        .lesson-success-message {
            text-align: center;
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 0.875rem;
            font-weight: 600;
            margin: 20px auto;
            max-width: 300px;
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.3s ease;
        }

        .lesson-success-message.show {
            opacity: 1;
            transform: translateY(0);
        }



        /* Spectrum Explorer specific modern styles */
        .spectrum-explorer {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
        }

        .prism-svg {
            cursor: pointer;
            user-select: none;
            margin-bottom: 24px;
            filter: drop-shadow(0 10px 30px rgba(0,0,0,0.1));
            border-radius: 12px;
        }

        .visible-indicator {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 2px solid #667eea;
            color: #667eea;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.2);
        }

        .scale-labels {
            display: flex;
            justify-content: space-between;
            font-size: 0.875rem;
            color: #6b7280;
            font-weight: 500;
        }

        .scale-label.visible {
            color: #667eea;
            font-weight: 600;
        }

        .exploration-progress {
            text-align: center;
            margin-top: 20px;
            padding: 16px;
            background: rgba(102, 126, 234, 0.1);
            border-radius: 12px;
            backdrop-filter: blur(10px);
        }

        .progress-text {
            font-size: 0.875rem;
            color: #667eea;
            font-weight: 600;
        }



        /* Keep all other spectrum explorer functionality styles */
        .spectrum-bar {
            position: relative;
            width: 100%;
            height: 60px;
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 16px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        #spectrum-canvas {
            width: 100%;
            height: 100%;
            border-radius: 12px;
        }

        .spectrum-points {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 0 0 24px 0;
            gap: 8px;
        }

        .spectrum-point {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            padding: 12px 8px;
            cursor: pointer;
            min-width: 80px;
            outline: none;
        }

        .point-icon {
            font-size: 1.5rem;
        }
        
        .point-label {
            font-size: 0.75rem;
            font-weight: 600;
            text-align: center;
        }

        .energy-scale {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 16px;
        }

        .energy-label {
            font-size: 0.875rem;
            color: #6b7280;
            white-space: nowrap;
            font-weight: 500;
        }

        .energy-bar {
            flex: 1;
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
        }

        .energy-fill {
            height: 100%;
            background: linear-gradient(90deg, #10b981 0%, #f59e0b 50%, #ef4444 100%);
            transition: width 0.5s ease;
            border-radius: 4px;
        }

        .panel-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 20px;
        }
        
        .panel-header .region-icon {
            color: initial !important;
            background: none !important;
            -webkit-text-fill-color: initial !important;
            background-clip: initial !important;
        }
        
        /* Fix emoji colors in revelation text and all spectrum content */
        .revelation-text h3,
        .revelation-text,
        .spectrum-point .point-icon,
        h3 {
            color: inherit;
        }
        
        /* Target emojis specifically to prevent color inheritance */
        .revelation-text h3::after,
        .revelation-text h3 *,
        .spectrum-point .point-icon,
        .point-icon {
            background: none !important;
            -webkit-background-clip: initial !important;
            -webkit-text-fill-color: initial !important;
            background-clip: initial !important;
            color: initial !important;
            font-family: "Apple Color Emoji", "Segoe UI Emoji", "Noto Color Emoji", sans-serif !important;
        }
        
        /* Specific fix for Mind = Blown emoji */
        .revelation-text h3 {
            background: none !important;
            -webkit-background-clip: initial !important;
            -webkit-text-fill-color: initial !important;
            background-clip: initial !important;
        }
        
        /* Universal emoji fix */
        span[style*="color: initial"],
        .emoji-fix {
            font-family: "Apple Color Emoji", "Segoe UI Emoji", "Noto Color Emoji", "Segoe UI Symbol", sans-serif !important;
            font-style: normal !important;
            font-variant: normal !important;
            text-rendering: auto !important;
            -webkit-font-smoothing: auto !important;
        }
        
        /* Additional emoji protection */
        .revelation-text span,
        .spectrum-point .point-icon {
            display: inline !important;
            text-decoration: none !important;
            font-weight: normal !important;
        }

        .region-icon {
            font-size: 2rem;
            color: initial;
            text-shadow: none;
            filter: none;
            display: inline-block;
            font-family: "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
        }

        .story-content {
            margin-bottom: 24px;
        }

        .description {
            font-size: 1rem;
            line-height: 1.6;
            margin: 0;
            color: #6b7280;
        }

        .tech-specs {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 16px;
            margin-bottom: 20px;
        }

        .spec-item {
            text-align: center;
            padding: 12px;
            background: rgba(102, 126, 234, 0.05);
            border-radius: 12px;
            border: 1px solid rgba(102, 126, 234, 0.1);
        }

        .spec-label {
            display: block;
            font-size: 0.75rem;
            color: #6b7280;
            text-transform: uppercase;
            font-weight: 600;
            margin-bottom: 4px;
            letter-spacing: 0.05em;
        }

        .spec-value {
            display: block;
            font-size: 0.875rem;
            font-weight: 600;
            color: #374151;
        }

        .color-display {
            margin-top: 16px;
        }

        .color-swatch {
            height: 40px;
            border-radius: 12px;
            margin-bottom: 8px;
            border: 2px solid rgba(102, 126, 234, 0.2);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .color-note {
            font-size: 0.875rem;
            color: #6b7280;
            margin: 0;
            font-style: italic;
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* Responsive design for spectrum explorer */
        @media (min-width: 768px) {
            .exploration-container {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 32px;
                align-items: start;
            }
            
            .spectrum-points {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .spectrum-point {
                min-width: 100px;
            }
        }

        @media (max-width: 480px) {
            .spectrum-explorer {
                padding: 20px;
            }
            
            .spectrum-points {
                display: grid;
                grid-template-columns: repeat(4, 1fr);
                gap: 12px;
            }
            
            .spectrum-point {
                min-width: auto;
            }
            
            .point-label {
                font-size: 0.7rem;
            }
            
            .tech-specs {
                grid-template-columns: 1fr;
            }
        }
</style>
</head>
<body>
<div class="progress-container"><div class="progress-bar" id="progressBar"></div></div>
<div class="lesson-container">
<section id="section1" class="visible">
<div class="image-placeholder"><h4>Image Placeholder</h4><p>An animation that starts with a high-resolution, photorealistic apple. It then moves through a stylized 'funnel' labeled 'Abstraction' which lists 'Spatial Discretization', 'Intensity Discretization', and 'Projection'. The apple emerges on the other side as a clearly pixelated version of itself, made of colored squares. This visually summarizes the entire abstraction process from continuous reality to a discrete digital image.</p></div>
<h1>From the Real World to a Grid of Pixels</h1>
<p>Have you ever zoomed *way* into a digital photo and seen it break down into a bunch of tiny squares? It's a bit like looking at a mosaic up close. What's actually going on there? It turns out that a digital image isn't a perfect, continuous copy of reality. Instead, it's a very clever and very detailed approximation. In this lesson, we'll peel back the layers and discover the first fundamental step in creating a digital image: turning the smooth, continuous world into a structured grid of pixels.</p>
<div class="continue-button" onclick="showNextSection(2)">Continue</div>
</section>
<section id="section2">
<h2>Making Sense of Space</h2>
<p>Imagine you're painting a landscape. You can't capture every single blade of grass or every molecule of water. You have to simplify. You have to decide which details to keep and which to leave out. Digital cameras and our eyes do the same thing, but in a much more structured way.</p>
<div class="continue-button" onclick="showNextSection(3)">Continue</div>
</section>
<section id="section3">
<p>This process of simplification, or 'abstraction' as we call it, involves three key steps. We'll touch on them all eventually, but for now, let's focus on the very first one: **Spatial Discretization**. It sounds complicated, but the idea is simple: we're taking the seamless space of the real world and chopping it up into a finite grid.</p>
<div class="continue-button" onclick="showNextSection(4)">Continue</div>
</section>
<section id="section4">
<p>Each little box in this grid is called a **Pixel**, which is short for 'Picture Element'. It's the smallest building block of any digital image you've ever seen.</p>
<div class="interactive-placeholder"><h4>Interactive Placeholder — The Pixel Peeker</h4><p>A high-quality photograph of a deer in a forest (like Figure 3.3) is displayed. Below it is a prominent 'Zoom' slider. As the student drags the slider to the right, the image zooms in on the deer's eye. At first, the zoom is smooth. After about 50% on the slider, the image starts to show its pixelated nature, with smooth curves becoming jagged 'staircases'. When the slider is at 100%, the view is a grid of 10x10 solid-colored squares. Hovering the mouse over any square will cause it to be outlined in white, and a small tooltip appears showing its grid coordinates, like '(x: 152, y: 88)' and its RGB color value. This makes the abstract concept of a pixel grid tangible and interactive.</p></div>
<p>Go ahead, be a 'pixel peeker'! See for yourself how the smooth fur of the deer is really just a clever arrangement of colored squares. Notice how all the detail *inside* one of those squares is lost? The camera's sensor just saw the average color for that tiny area and made it one solid block.</p>
<div class="continue-button" onclick="showNextSection(5)">Continue</div>
</section>
<section id="section5">
<p>This effect, where smooth lines become blocky and jagged when you zoom in too far, has a name: **Pixelation**. It's a direct consequence of spatial discretization.</p>
<div class="vocab-section"><h3>Build Your Vocab</h3><h4 class="vocab-term">Spatial Discretization</h4><p>The process of mapping a continuous space (the real world) onto a discrete grid. It's the foundational step that creates the pixel structure of a digital image.</p></div>
<p>But what determines how blocky an image looks? Why do some photos look crisp even when you zoom in, while others fall apart right away?</p>
<div class="continue-button" onclick="showNextSection(6)">Continue</div>
</section>
<section id="section6">
<h2>Resolution Matters</h2>
<p>The quality of this grid, and therefore the amount of detail an image can hold, is determined by its **Resolution**.</p>
<div class="image-placeholder"><h4>Image Placeholder</h4><p>A side-by-side meme. On the left, a stunning, high-resolution portrait of a cat looking majestic, with the caption: 'Me in my profile picture.' On the right, a blurry, blocky image of the same cat taken from a low-quality security camera, with the caption: 'Me on a Zoom call.' This uses humor to connect the technical concept of resolution to a relatable, everyday experience.</p></div>
<div class="continue-button" onclick="showNextSection(7)">Continue</div>
</section>
<section id="section7">
<p>Resolution is simply the number of pixels in an image, usually described as width × height. A photo from an old phone might be 640x480 pixels, while a modern camera might capture images at 6000x4000 pixels or more!</p>
<div class="continue-button" onclick="showNextSection(8)">Continue</div>
</section>
<section id="section8">
<p>More pixels mean a finer grid, which allows for capturing smaller details and creating smoother-looking curves. This all comes from the physical sensor inside the camera—a tiny chip covered in millions of light-sensitive photodiodes. Each photodiode becomes one pixel in the final image.</p>
<div class="continue-button" onclick="showNextSection(9)">Continue</div>
</section>
<section id="section9">
<div class="why-it-matters"><h3>Why It Matters</h3><p>Understanding that an image is a grid of pixels is the absolute first step in computer vision. All the complex algorithms we'll learn later—for detecting faces, reading text, or guiding self-driving cars—are fundamentally just performing mathematical operations on this grid of numbers. If you don't understand the grid, you can't understand the operations.</p></div>
<div class="continue-button" onclick="showNextSection(10)">Continue</div>
</section>
<section id="section10">
<div class="stop-and-think"><h3>Stop and Think</h3><p>If higher resolution is always better for detail, why don't we just set our phones to take every single photo at the absolute maximum possible resolution?</p><div id="stopThink1" style="display:none;" class="animate-in"><p>Think about trade-offs! A 40-megapixel photo takes up way more storage space than a 12-megapixel one. It also takes more processing power to handle and more time to send over the internet. Sometimes, 'good enough' is better than 'the best'.</p></div><button class="reveal-button" onclick="revealAnswer('stopThink1')">Reveal Answer</button></div>
<div class="continue-button" onclick="showNextSection(11)">Continue</div>
</section>
<section id="section11">
<div class="vocab-section"><h3>Build Your Vocab</h3><h4 class="vocab-term">Pixel (Picture Element)</h4><p>The smallest single point or square in a digital image. The fundamental building block.</p><h4 class="vocab-term">Resolution</h4><p>The total number of pixels in an image, typically expressed as width × height (e.g., 1920x1080). Higher resolution means more detail.</p><h4 class="vocab-term">Pixelation</h4><p>The visual artifact where individual pixels become visible, making an image look blocky or jagged. It happens when you enlarge an image beyond its resolution.</p></div>
<p>So, we've established our grid. But the grid is empty. In the next lesson, we'll figure out how each pixel gets its color.</p>
<div class="continue-button" onclick="showNextSection(12)">Continue</div>
</section>
<section id="section12">
<h2>Review and Reflect</h2>
<p>Let's take a moment to look back at what we've learned.</p>
<div class="continue-button" onclick="showNextSection(13)">Continue</div>
</section>
<section id="section13">
<p>In this lesson, we took the first crucial step in understanding digital images. We discovered that a seemingly perfect photo is actually an illusion built from a finite grid of tiny squares called pixels.</p>
<ul>
<li><strong>We learned that this structure comes from the process of Spatial Discretization</strong>, which is a direct result of the physical camera sensor.</li>
<li><strong>We defined Resolution</strong> as the measure of this grid's density and saw how it directly impacts the level of detail in an image.</li>
<li><strong>We identified Pixelation</strong> as the visual artifact that reveals this underlying grid structure.</li>
<li>Most importantly, we've established our foundational concept: an image is an organized grid. Now, we're ready to fill it with color.</li>
<ul>
<div class="continue-button" onclick="showNextSection(14)">Continue</div>
</section>
<section id="section14">
<div class="test-your-knowledge"><h3>Test Your Knowledge</h3><h4>Spatial discretization in the process of creating a digital image primarily determines the:</h4><div class="multiple-choice">
<div class="choice-option" data-correct="false" onclick="selectChoice(this, false, 'Range of colors in the image.', 'Not quite. The range of colors is determined by intensity quantization and bit depth, which we\'ll cover soon!')">Range of colors in the image.</div>
<div class="choice-option" data-correct="false" onclick="selectChoice(this, false, 'Overall brightness of the image.', 'Brightness is also related to the intensity values stored in the pixels, not the grid structure itself.')">Overall brightness of the image.</div>
<div class="choice-option" data-correct="true" onclick="selectChoice(this, true, 'Level of fine detail and sharpness.', 'Exactly! The finer the grid (higher resolution), the more fine detail can be captured, resulting in a sharper-looking image.')">Level of fine detail and sharpness.</div>
<div class="choice-option" data-correct="false" onclick="selectChoice(this, false, 'File format of the image (e.g., JPEG or PNG).', 'The file format is about how the pixel data is compressed and stored, but the underlying grid structure is fundamental to all of them.')">File format of the image (e.g., JPEG or PNG).</div>
</div></div>
<div class="continue-button" id="continue-after-test-knowledge" onclick="showNextSection(15)" style="display: none;">Continue</div>
</section>
<section id="section15">
<div class="faq-section"><h3>Frequently Asked Questions</h3>
<h4>Is a pixel always a perfect square?</h4>
<p>Great question! For most modern displays and image formats, yes, we assume pixels are square. However, in some older video standards or specialized applications, you can have non-square (rectangular) pixels! But for almost everything we'll do in this course, thinking of them as squares on a grid is the right way to go.</p>
<h4>So if I have a high-resolution image, I can zoom in forever without it getting blocky?</h4>
<p>Unfortunately, no. 'High resolution' just means the grid is very, very fine. But it's still a <em>finite</em> grid. No matter how high the resolution, if you zoom in far enough, you will eventually see the individual pixels. High resolution just pushes that point further away.</p>
</div>
</section>
<button id="markCompletedBtn" class="mark-completed-button" onclick="toggleCompleted()">✓ Mark as Completed</button>
</div>
<script>
let currentSection = 1;
const totalSections = 15;

updateProgress();

if (currentSection === totalSections) {
const completedButton = document.getElementById('markCompletedBtn');
if (completedButton) { completedButton.classList.add('show'); }
}

function showNextSection(nextSectionId) {
const currentSectionElement = document.getElementById(`section${currentSection}`);
const nextSectionElement = document.getElementById(`section${nextSectionId}`);
const currentButton = event && event.target ? event.target : null;
if (!nextSectionElement) return;
if (currentButton && currentButton.style) { currentButton.style.display = 'none'; }
nextSectionElement.classList.add('visible');
currentSection = nextSectionId;
updateProgress();
if (currentSection === totalSections) {
const completedButton = document.getElementById('markCompletedBtn');
if (completedButton) { completedButton.classList.add('show'); }
}
setTimeout(() => { nextSectionElement.scrollIntoView({ behavior: 'smooth', block: 'start' }); }, 300);
}

function updateProgress() {
const progressBar = document.getElementById('progressBar');
const progress = (currentSection / totalSections) * 100;
progressBar.style.width = `${progress}%`;
}

function revealAnswer(id) {
const revealText = document.getElementById(id);
const revealButton = event && event.target ? event.target : null;
if (revealText) { revealText.style.display = 'block'; revealText.classList.add('animate-in'); }
if (revealButton && revealButton.style) { revealButton.style.display = 'none'; }
}

function selectChoice(element, isCorrect, optionText, explanation) {
const choices = element.parentNode.querySelectorAll('.choice-option');
choices.forEach(choice => {
choice.classList.remove('selected', 'correct', 'incorrect');
const existingExplanation = choice.querySelector('.choice-explanation');
if (existingExplanation) { existingExplanation.remove(); }
});
element.classList.add('selected');
element.classList.add(isCorrect ? 'correct' : 'incorrect');
const explanationDiv = document.createElement('div');
explanationDiv.className = 'choice-explanation animate-in';
explanationDiv.style.display = 'block';
explanationDiv.innerHTML = `<strong>${isCorrect ? 'Correct!' : 'Not quite.'}</strong> ${explanation}`;
element.appendChild(explanationDiv);
if (!isCorrect) {
choices.forEach(choice => {
if (choice.getAttribute('data-correct') === 'true') {
choice.classList.add('correct');
const correctExplanation = document.createElement('div');
correctExplanation.className = 'choice-explanation animate-in';
correctExplanation.style.display = 'block';
correctExplanation.innerHTML = '<strong>This is the correct answer:</strong> Exactly! The finer the grid (higher resolution), the more fine detail can be captured, resulting in a sharper-looking image.';
choice.appendChild(correctExplanation);
}
});
}
const parentSection = element.closest('section');
if (parentSection) {
const sectionId = parentSection.id;
let continueButtonId = null;
if (sectionId === 'section14') { continueButtonId = 'continue-after-test-knowledge'; }
if (continueButtonId) {
const continueButton = document.getElementById(continueButtonId);
if (continueButton && continueButton.style.display === 'none') {
setTimeout(() => { continueButton.style.display = 'block'; continueButton.classList.add('show-with-animation'); }, 1000);
}
}
}
}

document.addEventListener('keydown', function(event) {
if (event.key === 'ArrowRight' || event.key === ' ') {
const continueButton = document.querySelector(`#section${currentSection} .continue-button`);
if (continueButton && continueButton.style.display !== 'none') {
event.preventDefault();
continueButton.click();
}
}
});

document.documentElement.style.scrollBehavior = 'smooth';

function toggleCompleted() {
const button = document.getElementById('markCompletedBtn');
if (!button) return;
const isCompleted = button.classList.contains('completed');
if (!isCompleted) {
try {
if (window.parent && window.parent.ProgressTracker) {
let courseId = 'computer-vision';
let pathId = 'image-representation';
let moduleId = 'cv-ch03-m1-foundations-and-theory';
let lessonId = 'cv-l1-real-world-to-grid';
if (window.parent.currentRoute) {
const route = window.parent.currentRoute;
if (route.courseId) courseId = route.courseId;
if (route.pathId) pathId = route.pathId;
if (route.moduleId) moduleId = route.moduleId;
if (route.lessonId) lessonId = route.lessonId;
}
const urlParams = new URLSearchParams(window.location.search);
if (urlParams.get('course')) courseId = urlParams.get('course');
if (urlParams.get('path')) pathId = urlParams.get('path');
if (urlParams.get('module')) moduleId = urlParams.get('module');
if (urlParams.get('lesson')) lessonId = urlParams.get('lesson');
window.parent.ProgressTracker.markLessonCompleted(courseId, pathId, moduleId, lessonId);
}
} catch (error) { console.error('Error with ProgressTracker:', error); }
button.classList.add('completed');
button.innerHTML = '✅ Completed!';
triggerCelebration();
localStorage.setItem('lesson_cv-ch03-l1_completed', 'true');
}
}

function triggerCelebration() { createConfetti(); showSuccessMessage(); }

function createConfetti() {
const confettiContainer = document.createElement('div');
confettiContainer.className = 'confetti-container';
document.body.appendChild(confettiContainer);
const confettiEmojis = ['🎉', '🎊', '✨', '🌟', '🎈', '🏆', '👏', '🥳', '🎯', '💫'];
const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#ffeaa7', '#dda0dd', '#98d8c8', '#f7dc6f'];
for (let i = 0; i < 50; i++) {
setTimeout(() => {
const confetti = document.createElement('div');
confetti.className = 'confetti';
if (Math.random() > 0.6) { confetti.textContent = confettiEmojis[Math.floor(Math.random() * confettiEmojis.length)]; }
else { confetti.innerHTML = '●'; confetti.style.color = colors[Math.floor(Math.random() * colors.length)]; }
confetti.style.left = Math.random() * 100 + '%';
confetti.style.animationDelay = Math.random() * 2 + 's';
confettiContainer.appendChild(confetti);
}, i * 50);
}
setTimeout(() => { if (confettiContainer.parentNode) { confettiContainer.parentNode.removeChild(confettiContainer); } }, 5000);
}

function showSuccessMessage() {
const successMessage = document.createElement('div');
successMessage.className = 'success-message show';
successMessage.innerHTML = '🎉 Lesson Completed! Great Job! 🎉';
document.body.appendChild(successMessage);
setTimeout(() => { if (successMessage.parentNode) { successMessage.parentNode.removeChild(successMessage); } }, 2500);
}

window.addEventListener('load', function() {
const button = document.getElementById('markCompletedBtn');
if (!button) return;
if (window.parent && window.parent.ProgressTracker) {
let courseId = 'computer-vision';
let pathId = 'image-representation';
let moduleId = 'cv-ch03-m1-foundations-and-theory';
let lessonId = 'cv-l1-real-world-to-grid';
if (window.parent.currentRoute) {
const route = window.parent.currentRoute;
if (route.courseId) courseId = route.courseId;
if (route.pathId) pathId = route.pathId;
if (route.moduleId) moduleId = route.moduleId;
if (route.lessonId) lessonId = route.lessonId;
}
const urlParams = new URLSearchParams(window.location.search);
if (urlParams.get('course')) courseId = urlParams.get('course');
if (urlParams.get('path')) pathId = urlParams.get('path');
if (urlParams.get('module')) moduleId = urlParams.get('module');
if (urlParams.get('lesson')) lessonId = urlParams.get('lesson');
const progress = window.parent.ProgressTracker.getLessonProgress(courseId, pathId, moduleId, lessonId);
if (progress.state === window.parent.ProgressTracker.STATES.COMPLETED) { button.classList.add('completed'); button.innerHTML = '✅ Completed!'; return; }
}
const isCompleted = localStorage.getItem('lesson_cv-ch03-l1_completed') === 'true';
if (isCompleted) { button.classList.add('completed'); button.innerHTML = '✅ Completed!'; }
});
</script>
</body>
</html>
