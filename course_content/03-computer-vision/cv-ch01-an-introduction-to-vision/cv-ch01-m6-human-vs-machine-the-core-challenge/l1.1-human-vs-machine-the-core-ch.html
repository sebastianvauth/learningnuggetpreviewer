?<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Human vs. Machine: The Core Challenge</title>
    <style>
* {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #ffffff;
            min-height: 100vh;
            color: #2d3748;
            line-height: 1.6;
        }

        /* Progress Bar */
        .progress-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: rgba(0, 0, 0, 0.1);
            z-index: 1000;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #4facfe 0%, #00f2fe 100%);
            width: 0%;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(79, 172, 254, 0.5);
        }



        /* Main Container */
        .lesson-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        /* Section Cards */
        section {
            background: transparent;
            margin-bottom: 30px;
            padding: 20px 0;
            display: none;
            opacity: 0;
            transition: all 0.6s ease;
            transform: translateY(20px);
        }

        section.visible {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        /* Typography */
        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 1.5rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1.2;
        }

        h2 {
            font-size: 2rem;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 1.5rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        h3 {
            font-size: 1.25rem;
            font-weight: 600;
            color: #4a5568;
            margin-bottom: 1rem;
        }

        p {
            font-size: 1.125rem;
            line-height: 1.7;
            color: #4a5568;
            margin-bottom: 1.5rem;
        }

        ul {
            margin-left: 1.5rem;
            margin-bottom: 1.5rem;
        }

        li {
            font-size: 1.125rem;
            line-height: 1.7;
            color: #4a5568;
            margin-bottom: 0.5rem;
        }

        strong {
            color: #2d3748;
            font-weight: 600;
        }

        em {
            color: #667eea;
            font-style: normal;
            font-weight: 500;
        }

        /* Image Placeholders */
        .image-placeholder {
            margin: 2rem 0;
        }

        /* Confetti Animation */
        .confetti-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
            overflow: hidden;
        }

        .confetti {
            position: absolute;
            font-size: 20px;
            animation: confetti-fall 3s linear infinite;
        }

        @keyframes confetti-fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        .confetti:nth-child(odd) {
            animation-duration: 2.5s;
            animation-delay: 0.2s;
        }

        .confetti:nth-child(even) {
            animation-duration: 3.5s;
            animation-delay: 0.5s;
        }

        .confetti:nth-child(3n) {
            animation-duration: 2.8s;
            animation-delay: 0.8s;
        }

        .confetti:nth-child(4n) {
            animation-duration: 3.2s;
            animation-delay: 0.3s;
        }

        .confetti:nth-child(5n) {
            animation-duration: 2.7s;
            animation-delay: 0.7s;
        }

        /* Success Message Animation */
        .success-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            padding: 20px 30px;
            border-radius: 12px;
            font-size: 1.2em;
            font-weight: 600;
            box-shadow: 0 10px 25px rgba(40, 167, 69, 0.3);
            z-index: 10000;
            opacity: 0;
            animation: success-popup 2.5s ease-out;
            pointer-events: none;
        }

        @keyframes success-popup {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.5);
            }
            20% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1.1);
            }
            40% {
                transform: translate(-50%, -50%) scale(1);
            }
            80% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
            100% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.9);
            }
        }

        .image-placeholder img {
            width: 100%;
            height: auto;
            display: block;
            margin: 0 auto;
        }
        
        /* Specific sizing for individual images by section */
        #section1 .image-placeholder img {
            width: 70% !important;              /* Image 1: 70% (dramatic light beam) */
            max-width: 500px !important;
        }

        #section6 .image-placeholder img {
            width: 55% !important;              /* Image 2: 50-60% (meme image) */
            max-width: 400px !important;
        }
        
        #section9 .image-placeholder img {
            width: 85% !important;              /* Image 3: 80-90% (prism diagram) */
            max-width: 600px !important;
        }
        
        #section13 .image-placeholder img {
            width: 85% !important;              /* Image 4: 80-90% (red object) */
            max-width: 600px !important;
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            #section1 .image-placeholder img {
                width: 80% !important;
                max-width: 400px !important;
            }

            #section6 .image-placeholder img {
                width: 65% !important;
                max-width: 350px !important;
            }
            
            #section9 .image-placeholder img,
            #section13 .image-placeholder img {
                width: 90% !important;
                max-width: 450px !important;
            }
        }
        
        @media (max-width: 480px) {
            #section1 .image-placeholder img {
                width: 85% !important;
                max-width: 300px !important;
            }

            #section6 .image-placeholder img {
                width: 75% !important;
                max-width: 280px !important;
            }
            
            #section9 .image-placeholder img,
            #section13 .image-placeholder img {
                width: 95% !important;
                max-width: 320px !important;
            }
        }

        /* Content Boxes */
        .vocab-section, .why-it-matters, .test-your-knowledge, .faq-section, 
        .stop-and-think, .check-your-knowledge {
            margin: 2rem 0;
            padding: 2rem;
            border-radius: 8px;
            border-left: 4px solid;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .vocab-section::before, .why-it-matters::before, .test-your-knowledge::before,
        .faq-section::before, .stop-and-think::before, .check-your-knowledge::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            opacity: 0.05;
            z-index: 0;
        }

        .vocab-section {
            background: linear-gradient(135deg, #e6f3ff 0%, #f0f8ff 100%);
            border-left-color: #4facfe;
            box-shadow: 0 10px 30px rgba(79, 172, 254, 0.1);
        }

        .vocab-section::before {
            background: linear-gradient(45deg, #4facfe, #00f2fe);
        }

        .why-it-matters {
            background: linear-gradient(135deg, #ffeef7 0%, #fff0f8 100%);
            border-left-color: #f093fb;
            box-shadow: 0 10px 30px rgba(240, 147, 251, 0.1);
        }

        .why-it-matters::before {
            background: linear-gradient(45deg, #f093fb, #f5576c);
        }

        .test-your-knowledge, .check-your-knowledge {
            background: linear-gradient(135deg, #eafaf1 0%, #f0fcf4 100%);
            border-left-color: #68d391;
            box-shadow: 0 10px 30px rgba(104, 211, 145, 0.1);
        }

        .test-your-knowledge::before, .check-your-knowledge::before {
            background: linear-gradient(45deg, #68d391, #4fd1c7);
        }

        .faq-section {
            background: linear-gradient(135deg, #fffbeb 0%, #fefcf3 100%);
            border-left-color: #fbbf24;
            box-shadow: 0 10px 30px rgba(251, 191, 36, 0.1);
        }

        .faq-section::before {
            background: linear-gradient(45deg, #fbbf24, #f59e0b);
        }

        .stop-and-think {
            background: linear-gradient(135deg, #f3e8ff 0%, #f8f4ff 100%);
            border-left-color: #a78bfa;
            box-shadow: 0 10px 30px rgba(167, 139, 250, 0.1);
        }

        .stop-and-think::before {
            background: linear-gradient(45deg, #a78bfa, #8b5cf6);
        }

        .vocab-section:hover, .why-it-matters:hover, .test-your-knowledge:hover,
        .faq-section:hover, .stop-and-think:hover, .check-your-knowledge:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
        }

        .vocab-section h3 {
            color: #0ea5e9;
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-weight: 700;
            margin-bottom: 1rem;
            position: relative;
            z-index: 1;
        }

        .why-it-matters h3 {
            color: #ec4899;
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-weight: 700;
            margin-bottom: 1rem;
            position: relative;
            z-index: 1;
        }

        .test-your-knowledge h3, .check-your-knowledge h3 {
            color: #10b981;
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-weight: 700;
            margin-bottom: 1rem;
            position: relative;
            z-index: 1;
        }

        .faq-section h3 {
            color: #d97706;
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-weight: 700;
            margin-bottom: 1rem;
            position: relative;
            z-index: 1;
        }

        .stop-and-think h3 {
            color: #8b5cf6;
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-weight: 700;
            margin-bottom: 1rem;
            position: relative;
            z-index: 1;
        }

        .vocab-section h4, .test-your-knowledge h4, .check-your-knowledge h4, .faq-section h4 {
            color: #2d3748;
            font-size: 1.25rem;
            font-weight: 600;
            margin: 1.5rem 0 1rem 0;
            position: relative;
            z-index: 1;
        }

        .vocab-term {
            color: #0ea5e9;
            font-weight: 600;
        }

        /* Buttons */
        .continue-button, .reveal-button, .check-button {
            display: inline-block;
            padding: 16px 32px;
            margin-top: 2rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 50px;
            text-decoration: none;
            cursor: pointer;
            border: none;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
            position: relative;
            overflow: hidden;
        }

        .continue-button::before, .reveal-button::before, .check-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .continue-button:hover, .reveal-button:hover, .check-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.4);
        }

        .continue-button:hover::before, .reveal-button:hover::before, .check-button:hover::before {
            left: 100%;
        }

        .continue-button:active, .reveal-button:active, .check-button:active {
            transform: translateY(-1px);
        }

        /* Hidden state for conditional buttons */
        .continue-button[style*="display: none"] {
            display: none !important;
        }

        /* Ensure all conditional continue buttons match normal button styling exactly when shown */
        #continue-after-interactive:not([style*="display: none"]),
        #continue-after-check-knowledge:not([style*="display: none"]),
        #continue-after-test-knowledge:not([style*="display: none"]) {
            display: inline-block !important;
            width: auto !important;
            max-width: none !important;
            min-width: auto !important;
            padding: 16px 32px !important;
            margin: 30px auto !important;
            box-sizing: border-box !important;
        }

        /* Center ALL continue buttons by making all sections center them */
        section {
            text-align: center;
        }

        /* Reset text alignment for all content except continue buttons */
        section > *:not(.continue-button) {
            text-align: left;
        }

        /* Ensure content boxes also have left alignment */
        .check-your-knowledge,
        .test-your-knowledge,
        .vocab-section,
        .why-it-matters,
        .faq-section,
        .stop-and-think {
            text-align: left;
        }

        /* Smooth appearance for conditional continue buttons */
        .continue-button.show-with-animation {
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.6s ease-out forwards;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Multiple Choice */
        .multiple-choice {
            margin: 1.5rem 0;
        }

        .choice-option {
            display: block;
            margin: 1rem 0;
            padding: 1.5rem;
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            font-weight: 500;
            position: relative;
            overflow: hidden;
        }

        .choice-option::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 0;
        }

        .choice-option:hover {
            transform: translateX(5px);
            border-color: rgba(102, 126, 234, 0.3);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.15);
        }

        .choice-option:hover::before {
            opacity: 0.05;
        }

        .choice-option.selected, .choice-option.correct {
            background: linear-gradient(135deg, #eafaf1 0%, #f0fcf4 100%);
            border-color: #68d391;
            color: #2d3748;
        }

        .choice-option.incorrect {
            background: linear-gradient(135deg, #fef2f2 0%, #fef7f7 100%);
            border-color: #f87171;
            color: #2d3748;
        }

        .choice-explanation {
            display: none;
            margin-top: 1rem;
            padding: 1rem;
            background: #f1f5f9;
            border-radius: 8px;
            font-size: 0.9rem;
            line-height: 1.6;
            animation: fadeIn 0.5s ease;
            position: relative;
            z-index: 1;
        }

        /* Spectrum Explorer - keeping the interactive styles but updating colors */
        .spectrum-explorer {
            position: relative;
            width: 100%;
            max-width: 100%;
            margin: 2rem 0;
            background: #ffffff;
            border: 1px solid #e2e8f0;
            padding: 40px;
        }

        .stage {
            min-height: 400px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .stage-text h3 {
            font-size: 1.75rem;
            font-weight: 600;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin: 0 0 16px 0;
        }

        .instruction {
            font-size: 1.1rem;
            color: #6b7280;
            margin: 0;
            padding: 16px 24px;
            background: rgba(102, 126, 234, 0.1);
            border-radius: 12px;
            border: 2px dashed rgba(102, 126, 234, 0.3);
        }

        .continue-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 16px 32px;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }

        .continue-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.4);
        }

        .revelation-text h3 {
            font-size: 2rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin: 0 0 16px 0;
        }

        .spectrum-point {
            border-radius: 16px;
            transition: all 0.3s ease;
            border: 2px solid #e2e8f0;
            background: #ffffff;
        }

        .spectrum-point:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.2);
            border-color: rgba(102, 126, 234, 0.3);
        }

        .spectrum-point.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.4);
        }

        .info-panel {
            background: #ffffff;
            border-radius: 16px;
            border: 1px solid #e2e8f0;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            padding: 24px;
        }

        .region-title {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hook {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .lesson-container {
                padding: 20px 15px;
            }

            section {
                padding: 15px 0;
                margin-bottom: 20px;
            }

            h1 {
                font-size: 2rem;
            }

            h2 {
                font-size: 1.75rem;
            }

            p, li {
                font-size: 1rem;
            }



            .continue-button, .reveal-button, .check-button {
                width: 100%;
            text-align: center;
                margin-top: 1.5rem;
            }

            .spectrum-explorer {
                padding: 20px;
            }

            .choice-option {
                padding: 1rem;
            }

            .mark-completed-button {
                padding: 14px 28px;
                font-size: 0.9rem;
                margin: 30px auto 15px auto;
            }
        }

        @media (max-width: 480px) {
            .lesson-container {
                padding: 15px 10px;
            }

            section {
                padding: 10px 0;
            }

            h1 {
                font-size: 1.75rem;
            }

            .vocab-section, .why-it-matters, .test-your-knowledge, 
            .faq-section, .stop-and-think, .check-your-knowledge {
                padding: 1.5rem;
            }

            .mark-completed-button {
                padding: 12px 24px;
                font-size: 0.85rem;
                margin: 25px auto 10px auto;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-in {
            animation: fadeIn 0.5s ease-out;
        }

        /* Accessibility */
        .choice-option:focus {
            outline: 2px solid #667eea;
            outline-offset: 2px;
        }

        .continue-button:focus, .reveal-button:focus, .check-button:focus {
            outline: 2px solid white;
            outline-offset: 2px;
        }

        /* Content positioning */
        .vocab-section *, .why-it-matters *, .test-your-knowledge *, 
        .faq-section *, .stop-and-think *, .check-your-knowledge * {
            position: relative;
            z-index: 1;
        }

        /* Mark as Completed Button */
        .mark-completed-button {
            display: none;
            width: 100%;
            max-width: 400px;
            margin: 40px auto 20px auto;
            padding: 16px 32px;
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(72, 187, 120, 0.3);
            text-align: center;
            text-decoration: none;
        }

        .mark-completed-button.show {
            display: block;
        }

        .mark-completed-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(72, 187, 120, 0.4);
            background: linear-gradient(135deg, #38a169 0%, #2f855a 100%);
        }

        .mark-completed-button:active {
            transform: translateY(0);
        }

        .mark-completed-button.completed {
            background: linear-gradient(135deg, #94a3b8 0%, #64748b 100%);
            box-shadow: 0 4px 20px rgba(148, 163, 184, 0.3);
            cursor: default;
        }

        .mark-completed-button.completed:hover {
            background: linear-gradient(135deg, #94a3b8 0%, #64748b 100%);
            box-shadow: 0 4px 20px rgba(148, 163, 184, 0.3);
            transform: none;
        }

        /* Success Message */
        .lesson-success-message {
            text-align: center;
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 0.875rem;
            font-weight: 600;
            margin: 20px auto;
            max-width: 300px;
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.3s ease;
        }

        .lesson-success-message.show {
            opacity: 1;
            transform: translateY(0);
        }



        /* Spectrum Explorer specific modern styles */
        .spectrum-explorer {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
        }

        .prism-svg {
            cursor: pointer;
            user-select: none;
            margin-bottom: 24px;
            filter: drop-shadow(0 10px 30px rgba(0,0,0,0.1));
            border-radius: 12px;
        }

        .visible-indicator {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 2px solid #667eea;
            color: #667eea;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.2);
        }

        .scale-labels {
            display: flex;
            justify-content: space-between;
            font-size: 0.875rem;
            color: #6b7280;
            font-weight: 500;
        }

        .scale-label.visible {
            color: #667eea;
            font-weight: 600;
        }

        .exploration-progress {
            text-align: center;
            margin-top: 20px;
            padding: 16px;
            background: rgba(102, 126, 234, 0.1);
            border-radius: 12px;
            backdrop-filter: blur(10px);
        }

        .progress-text {
            font-size: 0.875rem;
            color: #667eea;
            font-weight: 600;
        }



        /* Keep all other spectrum explorer functionality styles */
        .spectrum-bar {
            position: relative;
            width: 100%;
            height: 60px;
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 16px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        #spectrum-canvas {
            width: 100%;
            height: 100%;
            border-radius: 12px;
        }

        .spectrum-points {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 0 0 24px 0;
            gap: 8px;
        }

        .spectrum-point {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            padding: 12px 8px;
            cursor: pointer;
            min-width: 80px;
            outline: none;
        }

        .point-icon {
            font-size: 1.5rem;
        }
        
        .point-label {
            font-size: 0.75rem;
            font-weight: 600;
            text-align: center;
        }

        .energy-scale {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 16px;
        }

        .energy-label {
            font-size: 0.875rem;
            color: #6b7280;
            white-space: nowrap;
            font-weight: 500;
        }

        .energy-bar {
            flex: 1;
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
        }

        .energy-fill {
            height: 100%;
            background: linear-gradient(90deg, #10b981 0%, #f59e0b 50%, #ef4444 100%);
            transition: width 0.5s ease;
            border-radius: 4px;
        }

        .panel-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 20px;
        }
        
        .panel-header .region-icon {
            color: initial !important;
            background: none !important;
            -webkit-text-fill-color: initial !important;
            background-clip: initial !important;
        }
        
        /* Fix emoji colors in revelation text and all spectrum content */
        .revelation-text h3,
        .revelation-text,
        .spectrum-point .point-icon,
        h3 {
            color: inherit;
        }
        
        /* Target emojis specifically to prevent color inheritance */
        .revelation-text h3::after,
        .revelation-text h3 *,
        .spectrum-point .point-icon,
        .point-icon {
            background: none !important;
            -webkit-background-clip: initial !important;
            -webkit-text-fill-color: initial !important;
            background-clip: initial !important;
            color: initial !important;
            font-family: "Apple Color Emoji", "Segoe UI Emoji", "Noto Color Emoji", sans-serif !important;
        }
        
        /* Specific fix for Mind = Blown emoji */
        .revelation-text h3 {
            background: none !important;
            -webkit-background-clip: initial !important;
            -webkit-text-fill-color: initial !important;
            background-clip: initial !important;
        }
        
        /* Universal emoji fix */
        span[style*="color: initial"],
        .emoji-fix {
            font-family: "Apple Color Emoji", "Segoe UI Emoji", "Noto Color Emoji", "Segoe UI Symbol", sans-serif !important;
            font-style: normal !important;
            font-variant: normal !important;
            text-rendering: auto !important;
            -webkit-font-smoothing: auto !important;
        }
        
        /* Additional emoji protection */
        .revelation-text span,
        .spectrum-point .point-icon {
            display: inline !important;
            text-decoration: none !important;
            font-weight: normal !important;
        }

        .region-icon {
            font-size: 2rem;
            color: initial;
            text-shadow: none;
            filter: none;
            display: inline-block;
            font-family: "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
        }

        .story-content {
            margin-bottom: 24px;
        }

        .description {
            font-size: 1rem;
            line-height: 1.6;
            margin: 0;
            color: #6b7280;
        }

        .tech-specs {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 16px;
            margin-bottom: 20px;
        }

        .spec-item {
            text-align: center;
            padding: 12px;
            background: rgba(102, 126, 234, 0.05);
            border-radius: 12px;
            border: 1px solid rgba(102, 126, 234, 0.1);
        }

        .spec-label {
            display: block;
            font-size: 0.75rem;
            color: #6b7280;
            text-transform: uppercase;
            font-weight: 600;
            margin-bottom: 4px;
            letter-spacing: 0.05em;
        }

        .spec-value {
            display: block;
            font-size: 0.875rem;
            font-weight: 600;
            color: #374151;
        }

        .color-display {
            margin-top: 16px;
        }

        .color-swatch {
            height: 40px;
            border-radius: 12px;
            margin-bottom: 8px;
            border: 2px solid rgba(102, 126, 234, 0.2);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .color-note {
            font-size: 0.875rem;
            color: #6b7280;
            margin: 0;
            font-style: italic;
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* Responsive design for spectrum explorer */
        @media (min-width: 768px) {
            .exploration-container {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 32px;
                align-items: start;
            }
            
            .spectrum-points {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .spectrum-point {
                min-width: 100px;
            }
        }

        @media (max-width: 480px) {
            .spectrum-explorer {
                padding: 20px;
            }
            
            .spectrum-points {
                display: grid;
                grid-template-columns: repeat(4, 1fr);
                gap: 12px;
            }
            
            .spectrum-point {
                min-width: auto;
            }
            
            .point-label {
                font-size: 0.7rem;
            }
            
            .tech-specs {
                grid-template-columns: 1fr;
            }
        }
</style>
    </head>
<body>
    <div class="progress-container"><div class="progress-bar" id="progressBar"></div></div>

    <div class="lesson-container">
        <!-- Section 1: Intro -->
        <section id="section1" class="visible">
            <div class="image-placeholder">
                <img src="images/l16_1.png" alt="...">
        </div>            <h1>Human vs. Machine: The Core Challenge</h1>
            <p>We've been on a fascinating journey through the strange, wonderful, and flawed world of human vision. Now it's time to bring it all home. What does this mean for our main topic, computer vision? In this final introductory lesson, we'll define the fundamental difference between how <em>you</em> see the world and how a <em>computer</em> does, setting the stage for every concept we will learn from here on out.</p>
            <div class="continue-button" onclick="showNextSection(2)">Continue</div>
        </section>

        <!-- Section 2: From Semantics to Numbers + Interactive Placeholder -->
        <section id="section2">
            <h2>From Semantics to Numbers</h2>
            <p>When you see an apple, your brain outputs a rich, meaningful, <strong>semantic</strong> concept: "apple". When a computer's camera sees that same apple, it outputs... numbers. A giant grid of numbers, to be precise. This is the great divide we must learn to cross.</p>
            <div class="interactive-placeholder" aria-label="Interactive placeholder: 'The Semantic Slider'?drag to shift from a crisp apple image (semantic) to a pixel grid (numerical) with RGB tooltips at the end.">[Interactive placeholder]</div>
            <p>This transition from a meaningful object to a grid of numbers is the core challenge of computer vision. We live on the left side of this slider; a computer starts on the right. Our job is to teach it how to get from right to left.</p>
            <div class="continue-button" onclick="showNextSection(3)">Continue</div>
        </section>

        <!-- Section 3: Math Walkthrough -->
        <section id="section3">
            <div class="vocab-section">
                <h3>Math Walkthrough</h3>
                <h4 class="vocab-term">The Human View (Semantic Output)</h4>
                <p>Your brain processes visual input and outputs a rich, abstract concept with associated properties. It's a web of meaning.</p>
                <pre>HumanOutput ? Concept('Apple') ? {is_a: fruit, color: red, taste: sweet, ...}</pre>
                <h4 class="vocab-term">The Computer View (Numerical Input)</h4>
                <p>A computer's camera captures the scene and stores it as a massive 2D array (a matrix) of pixels. Each pixel is just a tuple of numbers, typically representing Red, Green, and Blue intensity values.</p>
                <pre>ComputerInput = [ (R11, G11, B11) (R12, G12, B12) ...
(R21, G21, B21) (R22, G22, B22) ...
   ...            ...           ... ]</pre>
                <h4 class="vocab-term">The Goal of Computer Vision</h4>
                <p>The entire field is about creating a function, an algorithm, that can take the numerical matrix as input and produce the correct semantic label as output. We need to find the magic function <code>f</code>.</p>
                <pre>f(ComputerInput) ? 'Apple'</pre>
            </div>
            <div class="continue-button" onclick="showNextSection(4)">Continue</div>
        </section>

        <!-- Section 4: Visual Aid + Vocab -->
        <section id="section4">
            <div class="image-placeholder" aria-label="Placeholder: Side-by-side flowchart?Eye?Brain?'Apple' vs Camera?Computer?????'Apple' with note about solving the '???' box.">[Image placeholder]</div>
            <div class="vocab-section">
                <h3>Build Your Vocab</h3>
                <h4 class="vocab-term">Pixel (Picture Element)</h4>
                <p>The smallest controllable unit of a digital image. On its own, it's just a set of numbers representing color and intensity at a single point.</p>
                <h4 class="vocab-term">Semantic Information</h4>
                <p>The meaning associated with data. "Apple" is semantic information; the pixel value <code>(210, 25, 10)</code> is just raw data until we give it meaning.</p>
            </div>
            <div class="continue-button" onclick="showNextSection(5)">Continue</div>
        </section>

        <!-- Section 5: Stop & Think + Why it Matters + Test Your Knowledge -->
        <section id="section5">
            <div class="stop-and-think">
                <h3>Stop and Think</h3>
                <p><strong>Question:</strong> Based on all the illusions and quirks we've seen in this chapter, what do you think is the single hardest part of human vision to replicate in a machine?</p>
                <button class="reveal-button" onclick="revealAnswer('sat2-answer')">Reveal Answer</button>
                <div id="sat2-answer" class="reveal-text">While recognizing objects is hard, the truly monumental challenge is replicating the brain's use of <strong>context</strong>. Remember the Checker Shadow Illusion? The brain wasn't just classifying squares; it was interpreting a 3D scene with lighting and shadows. Replicating that deep, intuitive understanding of how the world works is the holy grail of AI.</div>
            </div>
            <div class="why-it-matters">
                <h3>Why It Matters</h3>
                <p>This is it. This is the central problem statement for our entire field. How do we teach a machine to find the 'apple' in a sea of numbers? Every technique we will learn, from simple filters to edge detectors to the most complex deep neural networks, is a tool designed to help us solve this fundamental problem of bridging the gap between pixels and perception.</p>
            </div>
            <div class="test-your-knowledge">
                <h3>Test Your Knowledge</h3>
                <h4>What does a single pixel in a color digital image typically represent?</h4>
                <div class="multiple-choice">
                    <div class="choice-option" data-correct="false" data-explanation="This is what it corresponds to, but it isn't what it <em>is</em>. The pixel itself is the representation, not the object part." onclick="selectChoice(this)">A tiny part of a real-world object.</div>
                    <div class="choice-option" data-correct="true" data-explanation="Perfect! A single pixel holds no meaning on its own. It is simply a numerical data point representing the light captured at one specific location in the image grid." onclick="selectChoice(this)">A set of numbers representing color and intensity at one point.</div>
                    <div class="choice-option" data-correct="false" data-explanation="Detecting an 'edge' requires analyzing relationships <em>between</em> many pixels. A single pixel cannot be an edge by itself." onclick="selectChoice(this)">A semantic concept like 'edge' or 'corner'.</div>
                    <div class="choice-option" data-correct="false" data-explanation="This is close! It represents the properties of light, but it's more accurate to say it's the <em>numerical encoding</em> of that light, not the light itself." onclick="selectChoice(this)">A single dot of light.</div>
                </div>
            </div>
            <div class="continue-button" id="continue-after-test-knowledge" onclick="showNextSection(6)" style="display: none;">Continue</div>
        </section>

        <!-- Section 6: FAQs -->
        <section id="section6">
            <div class="faq-section">
                <h3>Frequently Asked Questions</h3>
                <h4>If a computer just sees numbers, how is computer vision even possible?</h4>
                <p>The magic lies in patterns. While a single pixel is meaningless, the <strong>relationships between pixels</strong> are full of patterns. A line is a pattern of similarly colored pixels. A texture is a repeating pattern. An object is a large-scale pattern of lines and textures. Computer vision algorithms are, at their core, sophisticated pattern detectors.</p>
            </div>
            <div class="faq-section">
                <h3>Frequently Asked Questions</h3>
                <h4>Is the goal of computer vision to perfectly copy human vision, including its mistakes?</h4>
                <p>That's a fantastic philosophical question! Initially, human vision is our inspiration and benchmark. But ultimately, the goal is often to create systems that are <strong>better</strong> than humans for specific tasks?more consistent, not prone to illusions, and able to see in ways we can't (like in infrared or ultraviolet). We learn from human vision, but we don't necessarily want to copy its flaws.</p>
            </div>
            <div class="continue-button" onclick="showNextSection(7)">Continue</div>
        </section>

        <!-- Section 7: Review and Reflect -->
        <section id="section7">
            <h2>Review and Reflect</h2>
            <p>Congratulations on completing the first chapter! We have laid the essential groundwork for our entire course. We've established:</p>
            <ul>
                <li>Human vision is an <strong>active, interpretive, and fallible</strong> process that is rich with semantic meaning.</li>
                <li>A computer "sees" a digital image as a fundamentally different thing: an <strong>objective, numerical grid of pixel values</strong>.</li>
                <li>The <strong>core challenge of computer vision</strong> is to build algorithms that can bridge this enormous gap, transforming raw pixel data into meaningful, human-like understanding.</li>
            </ul>
            <p>From here on, we will start building that bridge, piece by piece. In the next chapter, we'll take our first concrete step by exploring exactly how a camera turns light into the numbers we've been talking about.</p>
        </section>

        <!-- Mark as Completed Button -->
        <button id="markCompletedBtn" class="mark-completed-button" onclick="toggleCompleted()"> &#10003; Mark as Completed</button>
    </div>

    <script>
        let currentSection = 1;
        const totalSections = 7;

        // Initialize
        updateProgress();
        if (currentSection === totalSections) {
            const completedButton = document.getElementById('markCompletedBtn');
            if (completedButton) completedButton.classList.add('show');
        }

        function showNextSection(nextSectionId) {
            const nextSectionElement = document.getElementById(`section${nextSectionId}`);
            const currentButton = event && event.target;
            if (!nextSectionElement) return;

            if (currentButton && currentButton.classList.contains('continue-button')) {
                currentButton.style.display = 'none';
            }

            nextSectionElement.classList.add('visible', 'animate-in');
            currentSection = nextSectionId;
            updateProgress();

            if (currentSection === totalSections) {
                const completedButton = document.getElementById('markCompletedBtn');
                if (completedButton) completedButton.classList.add('show');
            }

            setTimeout(() => { nextSectionElement.scrollIntoView({ behavior: 'smooth', block: 'start' }); }, 250);
        }

        function updateProgress() {
            const progressBar = document.getElementById('progressBar');
            const progress = (currentSection / totalSections) * 100;
            progressBar.style.width = `${progress}%`;
        }

        function revealAnswer(id) {
            const text = document.getElementById(id);
            const button = event && event.target;
            if (text) { text.style.display = 'block'; text.classList.add('animate-in'); }
            if (button) { button.style.display = 'none'; }
        }

        function selectChoice(element) {
            const parent = element.parentNode;
            const options = parent.querySelectorAll('.choice-option');
            options.forEach(opt => {
                opt.classList.remove('selected', 'correct', 'incorrect');
                const existing = opt.querySelector('.choice-explanation');
                if (existing) existing.remove();
            });

            const isCorrect = element.getAttribute('data-correct') === 'true';
            const explanation = element.getAttribute('data-explanation') || '';

            element.classList.add('selected');
            element.classList.add(isCorrect ? 'correct' : 'incorrect');

            const exp = document.createElement('div');
            exp.className = 'choice-explanation animate-in';
            exp.style.display = 'block';
            exp.innerHTML = `<strong>${isCorrect ? 'Correct!' : 'Not quite.'}</strong> ${explanation}`;
            element.appendChild(exp);

            if (!isCorrect) {
                const correct = parent.querySelector('.choice-option[data-correct="true"]');
                if (correct) {
                    correct.classList.add('correct');
                    const cexp = document.createElement('div');
                    cexp.className = 'choice-explanation animate-in';
                    cexp.style.display = 'block';
                    const ctext = correct.getAttribute('data-explanation') || '';
                    cexp.innerHTML = `<strong>This is the correct answer:</strong> ${ctext}`;
                    correct.appendChild(cexp);
                }
            }

            // Show continue button after answering the quiz in section 5
            const parentSection = element.closest('section');
            if (parentSection && parentSection.id === 'section5') {
                const continueBtn = document.getElementById('continue-after-test-knowledge');
                if (continueBtn && continueBtn.style.display === 'none') {
                    setTimeout(() => { continueBtn.style.display = 'inline-block'; continueBtn.classList.add('animate-in'); }, 800);
                }
            }
        }

        // Keyboard Support
        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowRight' || e.key === ' ') {
                const btn = document.querySelector(`#section${currentSection} .continue-button`);
                if (btn && btn.style.display !== 'none') {
                    e.preventDefault();
                    btn.click();
                }
            }
        });

        // Completion tracking
        function toggleCompleted() {
            const button = document.getElementById('markCompletedBtn');
            if (!button) return;
            const isCompleted = button.classList.contains('completed');
            if (isCompleted) return;

            try {
                if (window.parent && window.parent.ProgressTracker) {
                    let courseId = 'computer-vision';
                    let pathId = 'introduction-to-vision';
                    let moduleId = 'cv-ch01-m6-human-vs-machine';
                    let lessonId = 'cv-l6-human-vs-machine-core-challenge';

                    if (window.parent.currentRoute) {
                        const route = window.parent.currentRoute;
                        if (route.courseId) courseId = route.courseId;
                        if (route.pathId) pathId = route.pathId;
                        if (route.moduleId) moduleId = route.moduleId;
                        if (route.lessonId) lessonId = route.lessonId;
                    }

                    const urlParams = new URLSearchParams(window.location.search);
                    if (urlParams.get('course')) courseId = urlParams.get('course');
                    if (urlParams.get('path')) pathId = urlParams.get('path');
                    if (urlParams.get('module')) moduleId = urlParams.get('module');
                    if (urlParams.get('lesson')) lessonId = urlParams.get('lesson');

                    window.parent.ProgressTracker.markLessonCompleted(courseId, pathId, moduleId, lessonId);
                }
            } catch (err) { console.error('Error with ProgressTracker:', err); }

            button.classList.add('completed');
            button.innerHTML = '&#9989; Completed!';
            triggerCelebration();
            localStorage.setItem('lesson_cv-ch01-l6_completed', 'true');
        }

        function triggerCelebration() { createConfetti(); showSuccessMessage(); }

        function createConfetti() {
            const container = document.createElement('div');
            container.className = 'confetti-container';
            document.body.appendChild(container);
            const emojis = ['??','??','?','??','??','??','??','??','??','??'];
            const colors = ['#ff6b6b','#4ecdc4','#45b7d1','#96ceb4','#ffeaa7','#dda0dd','#98d8c8','#f7dc6f'];
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const el = document.createElement('div');
                    el.className = 'confetti';
                    if (Math.random() > 0.6) { el.textContent = emojis[Math.floor(Math.random()*emojis.length)]; }
                    else { el.textContent = '?'; el.style.color = colors[Math.floor(Math.random()*colors.length)]; }
                    el.style.left = Math.random()*100 + '%';
                    el.style.animationDelay = Math.random()*2 + 's';
                    container.appendChild(el);
                }, i*50);
            }
            setTimeout(() => { if (container.parentNode) container.parentNode.removeChild(container); }, 5000);
        }

        function showSuccessMessage() {
            const msg = document.createElement('div');
            msg.className = 'success-message';
            msg.textContent = '?? Lesson Completed! Great Job! ??';
            document.body.appendChild(msg);
            setTimeout(() => { if (msg.parentNode) msg.parentNode.removeChild(msg); }, 2500);
        }

        // Load completion status on page load
        window.addEventListener('load', function() {
            const button = document.getElementById('markCompletedBtn');
            if (!button) return;

            try {
                if (window.parent && window.parent.ProgressTracker) {
                    let courseId = 'computer-vision';
                    let pathId = 'introduction-to-vision';
                    let moduleId = 'cv-ch01-m6-human-vs-machine';
                    let lessonId = 'cv-l6-human-vs-machine-core-challenge';

                    if (window.parent.currentRoute) {
                        const route = window.parent.currentRoute;
                        if (route.courseId) courseId = route.courseId;
                        if (route.pathId) pathId = route.pathId;
                        if (route.moduleId) moduleId = route.moduleId;
                        if (route.lessonId) lessonId = route.lessonId;
                    }

                    const urlParams = new URLSearchParams(window.location.search);
                    if (urlParams.get('course')) courseId = urlParams.get('course');
                    if (urlParams.get('path')) pathId = urlParams.get('path');
                    if (urlParams.get('module')) moduleId = urlParams.get('module');
                    if (urlParams.get('lesson')) lessonId = urlParams.get('lesson');

                    const progress = window.parent.ProgressTracker.getLessonProgress(courseId, pathId, moduleId, lessonId);
                    if (progress && progress.state === window.parent.ProgressTracker.STATES.COMPLETED) {
                        button.classList.add('completed');
                        button.innerHTML = '&#9989; Completed!';
                        return;
                    }
                }
            } catch (e) { /* ignore */ }

            const isCompleted = localStorage.getItem('lesson_cv-ch01-l6_completed') === 'true';
            if (isCompleted) { button.classList.add('completed'); button.innerHTML = '&#9989; Completed!'; }
        });
    </script>
</body>
</html>



